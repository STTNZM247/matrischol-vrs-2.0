{% extends 'base.html' %}
{% block title %}Nueva contrase単a{% endblock %}
{% block content %}
<section class="hero">
  <div class="cuadro cuadro-login" style="max-width:460px;">
    <h2>Crear nueva contrase単a</h2>
    <p style="font-size:.9rem;color:#555;">Ingresa tu nueva contrase単a. Debe tener al menos 8 caracteres.</p>
    <form method="post" novalidate>
      {% csrf_token %}
      {{ form.non_field_errors }}
      <div class="field-group" style="margin-bottom:12px;">
        {{ form.new_password.label_tag }}
        <div class="password-field" style="position:relative;display:flex;align-items:center;">
          {{ form.new_password }}
          <i class="fa-solid fa-eye" id="eye-new-password" onclick="togglePwd('id_new_password','eye-new-password')" style="position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer;color:#666;"></i>
        </div>
        {% if form.new_password.errors %}
          <div class="field-error">{{ form.new_password.errors|striptags }}</div>
        {% endif %}
      </div>
      <div class="field-group" style="margin-bottom:4px;">
        {{ form.confirm_password.label_tag }}
        <div class="password-field" style="position:relative;display:flex;align-items:center;">
          {{ form.confirm_password }}
          <i class="fa-solid fa-eye" id="eye-confirm-password" onclick="togglePwd('id_confirm_password','eye-confirm-password')" style="position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer;color:#666;"></i>
        </div>
        {% if form.confirm_password.errors %}
          <div class="field-error">{{ form.confirm_password.errors|striptags }}</div>
        {% endif %}
      </div>
      <button type="submit" style="margin-top:16px;">Guardar contrase単a</button>
    </form>
    <script>
      function togglePwd(inputId, iconId){
        const input = document.getElementById(inputId);
        const icon = document.getElementById(iconId);
        if(!input || !icon) return;
        if(input.type === 'password'){
          input.type = 'text';
          icon.classList.remove('fa-eye');
          icon.classList.add('fa-eye-slash');
        } else {
          input.type = 'password';
          icon.classList.remove('fa-eye-slash');
          icon.classList.add('fa-eye');
        }
      }
    </script>
  </div>
</section>
{% endblock %}